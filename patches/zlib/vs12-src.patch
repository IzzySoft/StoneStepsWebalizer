# HG changeset patch
# Parent 6b11c23fda61abf1d9f6814bb9b6c44c8fd7866d
Source code fixes

diff -r 6b11c23fda61 contrib/minizip/iowin32.c
--- a/contrib/minizip/iowin32.c	Wed Dec 10 01:11:16 2014 -0500
+++ b/contrib/minizip/iowin32.c	Wed Dec 10 01:15:04 2014 -0500
@@ -25,12 +25,14 @@
 #define INVALID_SET_FILE_POINTER ((DWORD)-1)
 #endif
 
-
+// WINRT is only available on Windows 8 and newer
+#if (_WIN32_WINNT >= 0x0602)
 #if defined(WINAPI_FAMILY_PARTITION) && (!(defined(IOWIN32_USING_WINRT_API)))
 #if WINAPI_FAMILY_PARTITION(WINAPI_PARTITION_APP)
 #define IOWIN32_USING_WINRT_API 1
 #endif
 #endif
+#endif
 
 voidpf  ZCALLBACK win32_open_file_func  OF((voidpf opaque, const char* filename, int mode));
 uLong   ZCALLBACK win32_read_file_func  OF((voidpf opaque, voidpf stream, void* buf, uLong size));
