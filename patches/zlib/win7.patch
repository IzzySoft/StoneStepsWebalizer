# HG changeset patch
# Parent 76aac2a94544beb9e8c6c7b5cdf1cf90a6f90420
Windows 7 source fixes

diff -r 76aac2a94544 contrib/minizip/iowin32.c
--- a/contrib/minizip/iowin32.c	Wed Dec 03 23:58:18 2014 -0500
+++ b/contrib/minizip/iowin32.c	Sun Dec 07 17:52:09 2014 -0500
@@ -25,12 +25,14 @@
 #define INVALID_SET_FILE_POINTER ((DWORD)-1)
 #endif
 
-
+// WINRT is only available on Windows 8 and newer
+#if (_WIN32_WINNT >= 0x0602)
 #if defined(WINAPI_FAMILY_PARTITION) && (!(defined(IOWIN32_USING_WINRT_API)))
 #if WINAPI_FAMILY_PARTITION(WINAPI_PARTITION_APP)
 #define IOWIN32_USING_WINRT_API 1
 #endif
 #endif
+#endif
 
 voidpf  ZCALLBACK win32_open_file_func  OF((voidpf opaque, const char* filename, int mode));
 uLong   ZCALLBACK win32_read_file_func  OF((voidpf opaque, voidpf stream, void* buf, uLong size));
